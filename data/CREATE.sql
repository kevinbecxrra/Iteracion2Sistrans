-- CREACIÓN DEL SECUENCIADOR
create sequence alohandes_sequence;


-- CREACIÓN DE LA TABLA OPERADOR
CREATE TABLE OPERADOR(
ID NUMBER,
NOMBRE VARCHAR2(50) NOT NULL
); 

ALTER TABLE OPERADOR
	ADD CONSTRAINT PK_OPERADOR 
	PRIMARY KEY (ID)
ENABLE; 


-- CREACIÓN DE LA TABLA HOTEL
CREATE TABLE HOTEL(
ID NUMBER, 
CAPACIDAD_OCUPADA NUMBER NOT NULL, 
CAPACIDAD_OFRECIDA NUMBER NOT NULL, 
FECHA_RETIRO VARCHAR2(50),
ESTADIA_NOCHE VARCHAR2(10) NOT NULL,
REGISTRADO_CAMARA VARCHAR2(10) NOT NULL,
REGISTRADO_TURISMO VARCHAR2(10) NOT NULL,
VINCULO VARCHAR2(50) NOT NULL
);

ALTER TABLE HOTEL
	ADD CONSTRAINT PK_HOTEL 
	PRIMARY KEY (ID)
ENABLE; 

ALTER TABLE HOTEL
	ADD CONSTRAINT FK_HOTEL
	FOREIGN KEY (ID)
	REFERENCES OPERADOR(ID)
ENABLE;

ALTER TABLE HOTEL
	ADD CONSTRAINT CK_VINCULOHOTEL 
	CHECK(VINCULO IN ('ESTUDIANTE','EGRESADO','EMPLEADO','PROFESOR','PADRE_ESTUDIANTE','PROFESOR_INVITADO','PERSONA_REGISTRADA'))
ENABLE;

ALTER TABLE HOTEL
	ADD CONSTRAINT CK_OCUPADAHOTEL
	CHECK(CAPACIDAD_OCUPADA>=0)
ENABLE;

ALTER TABLE HOTEL 
	ADD CONSTRAINT CK_OFRECIDAHOTEL
	CHECK (CAPACIDAD_OFRECIDA>=0)
ENABLE;

ALTER TABLE HOTEL 
	ADD CONSTRAINT CK_NOCHEHOTEL
	CHECK (ESTADIA_NOCHE IN ('YES','NO'))
ENABLE; 

ALTER TABLE HOTEL 
	ADD CONSTRAINT CK_CAMARAHOTEL
	CHECK (REGISTRADO_CAMARA IN ('YES','NO'))
ENABLE; 

ALTER TABLE HOTEL 
	ADD CONSTRAINT CK_TURISMOHOTEL
	CHECK (REGISTRADO_TURISMO IN ('YES','NO'))
ENABLE; 

-- CREACIÓN DE LA TABLA DE SERVICIO HOTEL
CREATE TABLE SERVICIO_HOTEL(
ID_HOTEL NUMBER,
SERVICIO VARCHAR2(50) NOT NULL
);

ALTER TABLE SERVICIO_HOTEL
	ADD CONSTRAINT PK_SERVICIOHOTEL
	PRIMARY KEY (ID_HOTEL,SERVICIO)
ENABLE;

ALTER TABLE SERVICIO_HOTEL
	ADD CONSTRAINT FK_SERVICIOHOTEL
	FOREIGN KEY (ID_HOTEL)
	REFERENCES HOTEL(ID)
ENABLE;

-- CREACION DE LA TABLA CONTRATO 
CREATE TABLE CONTRATO(
ID NUMBER, 
CAPACIDAD NUMBER NOT NULL,
COSTO NUMBER NOT NULL
);

ALTER TABLE CONTRATO
	ADD CONSTRAINT PK_CONTRATO
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE CONTRATO
	ADD CONSTRAINT CK_CAPACIDADCONTRATO
	CHECK(CAPACIDAD>=0)
ENABLE;

ALTER TABLE CONTRATO
	ADD CONSTRAINT CK_COSTO
	CHECK (COSTO>=0)
ENABLE;

-- CREACIÓN DE LA TABLA CONTRATOHABHOTEL
CREATE TABLE CONTRATOHABHOTEL(
ID_CONTRATO NUMBER,
ID_HOTEL NUMBER NOT NULL,
CATEGORIA NUMBER NOT NULL, 
TAMANIO NUMBER NOT NULL, 
TIPO_HABITACION VARCHAR2(20) NOT NULL,
UBICACION NUMBER NOT NULL
);
ALTER TABLE CONTRATOHABHOTEL
	ADD CONSTRAINT FK_HABHOTEL
	FOREIGN KEY (ID_HOTEL)
	REFERENCES HOTEL(ID)
ENABLE;

ALTER TABLE CONTRATOHABHOTEL
	ADD CONSTRAINT PK_HABHOTEL
	PRIMARY KEY (ID_CONTRATO)
ENABLE;

ALTER TABLE CONTRATOHABHOTEL
	ADD CONSTRAINT FK_CONTRATOHABHOTEL
	FOREIGN KEY (ID_CONTRATO)
	REFERENCES CONTRATO(ID)
ENABLE;


ALTER TABLE CONTRATOHABHOTEL
	ADD CONSTRAINT CK_TIPO
	CHECK(TIPO_HABITACION IN ('ESTANDAR','SUITE','SEMISUITE'))
ENABLE;

ALTER TABLE CONTRATOHABHOTEL
	ADD CONSTRAINT CK_CATEGORIA
	CHECK (CATEGORIA >0)
ENABLE;

ALTER TABLE CONTRATOHABHOTEL
	ADD CONSTRAINT CK_TAMANIO
	CHECK(TAMANIO>0)
ENABLE;

ALTER TABLE CONTRATOHABHOTEL
	ADD CONSTRAINT CK_UBICACION
	CHECK (UBICACION>=0)
ENABLE; 


-- CREACIÓN TABLA SERVICIOS HABHOTEL
CREATE TABLE SERVICIOS_HABHOTEL(
ID_HABHOTEL NUMBER, 
SERVICIO VARCHAR2(50)
);

ALTER TABLE SERVICIOS_HABHOTEL
	ADD CONSTRAINT PK_SERVICIOS_HABHOTEL
	PRIMARY KEY (ID_HABHOTEL,SERVICIO)
ENABLE;

ALTER TABLE SERVICIOS_HABHOTEL
	ADD CONSTRAINT FK_SERVICIOS_HABHOTEL
	FOREIGN KEY (ID_HABHOTEL)
	REFERENCES CONTRATOHABHOTEL(ID_CONTRATO)
ENABLE;

-- CREACIÓN TABLA HOSTAL 
CREATE TABLE HOSTAL(
ID NUMBER,
CAPACIDAD_OFRECIDA NUMBER NOT NULL, 
CAPACIDAD_OCUPADA NUMBER NOT NULL, 
FECHA_RETIRO VARCHAR2(50),
HORARIO_APERTURA NUMBER NOT NULL,
HORARIO_CIERRE NUMBER NOT NULL,
REGISTRADO_CAMARA VARCHAR2(10) NOT NULL,
REGISTRADO_TURISMO VARCHAR2(10) NOT NULL,
VINCULO VARCHAR2(50) NOT NULL
);

ALTER TABLE HOSTAL
	ADD CONSTRAINT CK_CAMARAHOSTAL
	CHECK (REGISTRADO_CAMARA IN ('YES','NO'))
ENABLE; 

ALTER TABLE HOSTAL 
	ADD CONSTRAINT CK_TURISMOHOSTAL
	CHECK (REGISTRADO_TURISMO IN ('YES','NO'))
ENABLE; 

ALTER TABLE HOSTAL
	ADD CONSTRAINT PK_HOSTAL
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE HOSTAL
	ADD CONSTRAINT FK_HOSTAL
	FOREIGN KEY (ID)
	REFERENCES OPERADOR(ID)
ENABLE;

ALTER TABLE HOSTAL
	ADD CONSTRAINT CK_OFRECIDAHOSTAL
	CHECK (CAPACIDAD_OFRECIDA >=0)
ENABLE; 

ALTER TABLE HOSTAL
	ADD CONSTRAINT CK_OCUPADAHOSTAL
	CHECK (CAPACIDAD_OCUPADA >=0)
ENABLE; 

ALTER TABLE HOSTAL
	ADD CONSTRAINT CK_VINCULOHOSTAL 
	CHECK(VINCULO IN ('ESTUDIANTE','EGRESADO','EMPLEADO','PROFESOR','PADRE_ESTUDIANTE','PROFESOR_INVITADO','PERSONA_REGISTRADA'))
ENABLE;

-- CREACIÓN TABLA CONTRATOHABHOSTAL 
CREATE TABLE CONTRATOHABHOSTAL (
ID_CONTRATO NUMBER, 
ID_HOSTAL NUMBER NOT NULL
);

ALTER TABLE CONTRATOHABHOSTAL
	ADD CONSTRAINT PK_HABHOSTAL
	PRIMARY KEY (ID_CONTRATO)
ENABLE; 

ALTER TABLE CONTRATOHABHOSTAL
	ADD CONSTRAINT FK_CONTRATOHOSTAL
	FOREIGN KEY (ID_CONTRATO)
	REFERENCES CONTRATO(ID)
ENABLE;

ALTER TABLE CONTRATOHABHOSTAL
	ADD CONSTRAINT FK_HABHOSTAL
	FOREIGN KEY (ID_HOSTAL)
	REFERENCES HOSTAL(ID)
ENABLE;

-- CREACIÓN TABLA VIVIENDAUNIVERSITARIA
CREATE TABLE VIVIENDAUNIVERSITARIA(
ID NUMBER, 
CAPACIDAD_OFRECIDA NUMBER NOT NULL, 
CAPACIDAD_OCUPADA NUMBER NOT NULL, 
COSTO_GIMNASIO NUMBER NOT NULL,
COSTO_RESTAURANTE NUMBER NOT NULL,
COSTO_SALAS_ESPARCIMIENTO NUMBER NOT NULL,
COSTO_SALAS_ESTUDIO NUMBER NOT NULL, 
FECHA_RETIRO VARCHAR2(50),
REGISTRADO_CAMARA VARCHAR2(10) NOT NULL,
REGISTRADO_TURISMO VARCHAR2(10) NOT NULL,
VINCULO VARCHAR2(50) NOT NULL
);

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT PK_VIVENDAUNIVERSITARIA
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT FK_VIVUNIVERSITARIA
	FOREIGN KEY (ID)
	REFERENCES OPERADOR(ID)
ENABLE;

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_OFRECIDAUNIVERSITARIA
	CHECK (CAPACIDAD_OFRECIDA>=0)
ENABLE; 

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_OCUPADAUNIVERSITARIA
	CHECK(CAPACIDAD_OCUPADA>=0)
ENABLE; 

ALTER TABLE VIVIENDAUNIVERSITARIA 
	ADD CONSTRAINT CK_COSTOGIMNASIO
	CHECK (COSTO_GIMNASIO>=0)
ENABLE; 

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_COSTORESTAURANTE
	CHECK (COSTO_RESTAURANTE>=0)
ENABLE;

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_COSTOSALAS_ESPARCIMIENTO
	CHECK (COSTO_SALAS_ESPARCIMIENTO>=0)
ENABLE; 

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_COSTOSALAS_ESTUDIO
	CHECK (COSTO_SALAS_ESTUDIO>=0)
ENABLE; 

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_VINCULOUNIVERSITARIA
	CHECK(VINCULO IN ('ESTUDIANTE','EGRESADO','EMPLEADO','PROFESOR','PADRE_ESTUDIANTE','PROFESOR_INVITADO','PERSONA_REGISTRADA'))
ENABLE;

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_CAMARAVIVIENDAUNIVERSITARIA
	CHECK (REGISTRADO_CAMARA IN ('YES','NO'))
ENABLE; 

ALTER TABLE VIVIENDAUNIVERSITARIA
	ADD CONSTRAINT CK_TURISMOVIVENDAUNIVERSITARIA
	CHECK (REGISTRADO_TURISMO IN ('YES','NO'))
ENABLE; 

-- CREACION TABLA CONTRATO HAB UNIVERSITARIA
CREATE TABLE CONTRATOHABUNIVERSITARIA(
ID_CONTRATO NUMBER, 
ID_VIVIENDA NUMBER NOT NULL, 
INDIVIDUAL VARCHAR2(10) NOT NULL,
UBICACION NUMBER NOT NULL, 
GIMNASIO VARCHAR2(10)NOT NULL, 
RESTAURANTE VARCHAR2(10) NOT NULL, 
SALA_ESPARCIMIENTO VARCHAR2(10) NOT NULL, 
SALA_ESTUDIO VARCHAR2(10) NOT NULL
);

ALTER TABLE CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT PK_CONTRATOHABUNIVERSITARIA
	PRIMARY KEY (ID_CONTRATO)
ENABLE; 

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT FK_CONTRATOHABUNIVERSITARIA
	FOREIGN KEY (ID_CONTRATO)
	REFERENCES CONTRATO(ID)
ENABLE;

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT FK_VIVIENDAUNIVERSITARIA
	FOREIGN KEY (ID_VIVIENDA)
	REFERENCES VIVIENDAUNIVERSITARIA(ID)
ENABLE;

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT CK_INDIVIDUAL
	CHECK (INDIVIDUAL IN ('YES','NO'))
ENABLE; 

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT CK_UBICACIONUNIVERSITARIA
	CHECK (UBICACION >=0)
ENABLE; 

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT CK_GYMUNIVERSITARIA
	CHECK (GIMNASIO IN ('YES','NO'))
ENABLE; 

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT CK_RESUNIVERSITARIA
	CHECK (RESTAURANTE IN ('YES','NO'))
ENABLE; 

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT CK_SALAESPUNIVERSITARIA
	CHECK (SALA_ESPARCIMIENTO IN ('YES','NO'))
ENABLE; 

ALTER TABLE  CONTRATOHABUNIVERSITARIA
	ADD CONSTRAINT CK_ESTUDIOMUNIVERSITARIA
	CHECK (SALA_ESTUDIO IN ('YES','NO'))
ENABLE; 

-- CREACIÓN DE LA TABLA CLIENTE 
CREATE TABLE CLIENTE(
ID NUMBER, 
NOMBRE VARCHAR2(50) NOT NULL, 
USUARIO VARCHAR2(50) NOT NULL UNIQUE, 
VINCULO VARCHAR(50) NOT NULL
);

ALTER TABLE CLIENTE
	ADD CONSTRAINT PK_CLIENTE
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE CLIENTE 
	ADD CONSTRAINT CK_VINCULOCLIENTE
	CHECK(VINCULO IN ('ESTUDIANTE','EGRESADO','EMPLEADO','PROFESOR','PADRE_ESTUDIANTE','PROFESOR_INVITADO','PERSONA_REGISTRADA'))
ENABLE;


-- CREACIÓN DE LA TABLA PERSONA_NATURAL
CREATE TABLE PERSONA_NATURAL(
ID NUMBER,
DOCUMENTO VARCHAR2(50) NOT NULL, 
NUMERO_DOCUMENTO NUMBER NOT NULL UNIQUE,
NOMBRE VARCHAR2(50) NOT NULL,
VINCULO VARCHAR2(50) NOT NULL
);

ALTER TABLE PERSONA_NATURAL
	ADD CONSTRAINT PK_PERSONA_NATURAL
	PRIMARY KEY (ID) 
ENABLE; 

ALTER TABLE PERSONA_NATURAL
	ADD CONSTRAINT FK_PERSONA_NATURAL
	FOREIGN KEY (ID)
	REFERENCES OPERADOR(ID)
ENABLE;

ALTER TABLE PERSONA_NATURAL
	ADD CONSTRAINT CK_DOCUMENTO 
	CHECK(DOCUMENTO IN ('CEDULA_DE_CIUDADANIA','CEDULA_DE_EXTRANJERIA','PASAPORTE'))
ENABLE;

ALTER TABLE PERSONA_NATURAL
	ADD CONSTRAINT CK_VINCULONATURAL
	CHECK(VINCULO IN ('ESTUDIANTE','EGRESADO','EMPLEADO','PROFESOR','PADRE_ESTUDIANTE','PROFESOR_INVITADO','PERSONA_REGISTRADA'))
ENABLE;


-- CREACION DE LA TABLA VIVIENDA_FAMILIAR
CREATE TABLE VIVIENDA_FAMILIAR(
ID NUMBER, 
ID_PERSONA_NATURAL NUMBER NOT NULL,
CAPACIDAD_OFRECIDA NUMBER NOT NULL, 
CAPACIDAD_OCUPADA NUMBER NOT NULL, 
DIAS_ESPORADICOS_UTILIZADOS NUMBER,
FECHA_RETIRO TIMESTAMP(0),
HORARIO_APERTURA NUMBER NOT NULL,
HORARIO_CIERRE NUMBER NOT NULL,
VINCULO VARCHAR2(50) NOT NULL
);

ALTER TABLE VIVIENDA_FAMILIAR
	ADD CONSTRAINT PK_VIVIENDA_FAMILIAR
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE VIVIENDA_FAMILIAR
	ADD CONSTRAINT FK_VIVIENDA_FAMILIAR
	FOREIGN KEY (ID_PERSONA_NATURAL)
	REFERENCES PERSONA_NATURAL(ID)
ENABLE;

ALTER TABLE VIVIENDA_FAMILIAR
	ADD CONSTRAINT CK_OFRECIDA_FAMILIAR
	CHECK (CAPACIDAD_OFRECIDA>=0)
ENABLE;

ALTER TABLE VIVIENDA_FAMILIAR
	ADD CONSTRAINT CK_DIAS_ESPORADICOS_UTLIZADOS
	CHECK(CAPACIDAD_OCUPADA>=0)
ENABLE; 

ALTER TABLE VIVIENDA_FAMILIAR
	ADD CONSTRAINT CK_OCUPADA_FAMILIAR
	CHECK(CAPACIDAD_OCUPADA>=0)
ENABLE; 

ALTER TABLE VIVIENDA_FAMILIAR
	ADD CONSTRAINT CK_VINCULO_FAMILIAR
	CHECK(VINCULO IN ('ESTUDIANTE','EGRESADO','EMPLEADO','PROFESOR','PADRE_ESTUDIANTE','PROFESOR_INVITADO','PERSONA_REGISTRADA'))
ENABLE;


-- CREACIÓN DE LA TABLA CONTRATO_HAB_VIVIENDA
CREATE TABLE CONTRATO_HAB_VIVIENDA(
ID_CONTRATO NUMBER NOT NULL,
ID_VIVIENDA NUMBER NOT NULL,
MESES_CONTRATADOS NUMBER NOT NULL
);

ALTER TABLE CONTRATO_HAB_VIVIENDA
	ADD CONSTRAINT FK_HABVIVIENDA
	FOREIGN KEY (ID_VIVIENDA)
	REFERENCES VIVIENDA_FAMILIAR(ID)
ENABLE;

ALTER TABLE CONTRATO_HAB_VIVIENDA
	ADD CONSTRAINT PK_HABVIVIENDA
	PRIMARY KEY (ID_CONTRATO)
ENABLE;

ALTER TABLE CONTRATO_HAB_VIVIENDA
	ADD CONSTRAINT FK_CONTRATO_HAB_VIVIENDA
	FOREIGN KEY (ID_CONTRATO)
	REFERENCES CONTRATO(ID)
ENABLE;

ALTER TABLE CONTRATO_HAB_VIVIENDA
	ADD CONSTRAINT CK_MESES_CONTRATADOS
	CHECK(MESES_CONTRATADOS >=1)
ENABLE;




-- CREACION DE LA TABLA APARTAMENTO
CREATE TABLE APARTAMENTO(
ID NUMBER NOT NULL, 
ID_PERSONA_NATURAL NUMBER NOT NULL,
CAPACIDAD_OFRECIDA NUMBER NOT NULL, 
CAPACIDAD_OCUPADA NUMBER NOT NULL, 
DIAS_ESPORADICOS_UTILIZADOS NUMBER,
ESTA_AMOBLADO VARCHAR2(20) NOT NULL,
FECHA_RETIRO TIMESTAMP(0),
VINCULO VARCHAR2(50) NOT NULL
);

ALTER TABLE APARTAMENTO
	ADD CONSTRAINT PK_APARTAMENTO
	PRIMARY KEY (ID)
ENABLE;

ALTER TABLE APARTAMENTO
	ADD CONSTRAINT CK_CAP_OFRECIDA_APARTAMENTO
	CHECK (CAPACIDAD_OFRECIDA>=0)
ENABLE;

ALTER TABLE APARTAMENTO
	ADD CONSTRAINT CK_OCUPADA_APARTAMENTO
	CHECK(CAPACIDAD_OCUPADA>=0)
ENABLE; 

ALTER TABLE APARTAMENTO
	ADD CONSTRAINT CK_VINCULO_APARTAMENTO
	CHECK(VINCULO IN ('ESTUDIANTE','EGRESADO','EMPLEADO','PROFESOR','PADRE_ESTUDIANTE'))
ENABLE;

ALTER TABLE APARTAMENTO
	ADD CONSTRAINT CK_APARTAMENTO_AMOBLADO
	CHECK (ESTA_AMOBLADO IN ('YES','NO'))
ENABLE; 

ALTER TABLE APARTAMENTO
	ADD CONSTRAINT FK_APARTAMENTO
	FOREIGN KEY (ID_PERSONA_NATURAL)
	REFERENCES PERSONA_NATURAL(ID)
ENABLE;


-- CREACIÓN DE LA TABLA CONTRATO_HAB_APARTAMENTO
CREATE TABLE CONTRATO_APARTAMENTO(
ID_CONTRATO NUMBER NOT NULL,
ID_APARTAMENTO NUMBER NOT NULL,
MESES_CONTRATADOS NUMBER NOT NULL
);

ALTER TABLE CONTRATO_APARTAMENTO
	ADD CONSTRAINT FK_ID_APARTAMENTO
	FOREIGN KEY (ID_APARTAMENTO)
	REFERENCES APARTAMENTO(ID)
ENABLE;

ALTER TABLE CONTRATO_APARTAMENTO
	ADD CONSTRAINT PK_CONTRATO_APARTAMENTO
	PRIMARY KEY (ID_CONTRATO)
ENABLE;

ALTER TABLE CONTRATO_APARTAMENTO
	ADD CONSTRAINT FK_CONTRATO_APARTAMENTO
	FOREIGN KEY (ID_CONTRATO)
	REFERENCES CONTRATO(ID)
ENABLE;

ALTER TABLE CONTRATO_APARTAMENTO
	ADD CONSTRAINT CK_MESES_CONTRATADOS_APTO
	CHECK(MESES_CONTRATADOS >=1)
ENABLE;


-- CREACIÓN DE LA TABLA CONTRATO_CLIENTE_ESPORADICO
CREATE TABLE CONTRATO_CLIENTE_ESPORADICO(
ID_CONTRATO NUMBER NOT NULL,
ID_APARTAMENTO NUMBER NOT NULL,
ID_VIVIENDA NUMBER NOT NULL,
CANTIDAD_NOCHES NUMBER NOT NULL,
COSTO_BASE NUMBER NOT NULL,
COSTO_SEGURO NUMBER NOT NULL,
NUM_HABITACIONES NUMBER NOT NULL,
UBICACION VARCHAR2(50)
);

ALTER TABLE CONTRATO_CLIENTE_ESPORADICO
	ADD CONSTRAINT FK_CONTRATO_CLIENTE_ESPORADICO
	FOREIGN KEY (ID_CONTRATO)
	REFERENCES CONTRATO(ID)
ENABLE;

ALTER TABLE CONTRATO_CLIENTE_ESPORADICO
	ADD CONSTRAINT PK_CONTRATO_ESPORADICO
	PRIMARY KEY (ID_CONTRATO)
ENABLE;

ALTER TABLE CONTRATO_CLIENTE_ESPORADICO
	ADD CONSTRAINT CK_CANTIDAD_NOCHES
	CHECK(CANTIDAD_NOCHES >=1)
ENABLE;

ALTER TABLE CONTRATO_CLIENTE_ESPORADICO
	ADD CONSTRAINT CK_COSTO_BASE
	CHECK(COSTO_BASE >0)
ENABLE;

ALTER TABLE CONTRATO_CLIENTE_ESPORADICO
	ADD CONSTRAINT CK_COSTO_SEGURO
	CHECK(COSTO_SEGURO >0)
ENABLE;

ALTER TABLE CONTRATO_CLIENTE_ESPORADICO
	ADD CONSTRAINT CK_NUM_HABITACIONES
	CHECK(NUM_HABITACIONES >0)
ENABLE;





-- CREACIÓN DE LA TABLA SEGURO_ARRENDAMIENTO
CREATE TABLE SEGURO_ARRENDAMIENTO(
ID NUMBER NOT NULL,
ACTOS_POR_TERCEROS VARCHAR2(20) NOT NULL,
CANON_ARRENDAMIENTO VARCHAR2(20) NOT NULL,
DANIOS_INCENDIO VARCHAR2(20) NOT NULL,
DANIOS_MASCOTAS VARCHAR2(20) NOT NULL,
DANIOS_RAYOS VARCHAR2(20) NOT NULL,
DANIOS_TERREMOTO VARCHAR2(20) NOT NULL,
EXPLOSIONES VARCHAR2(20) NOT NULL,
HURTO VARCHAR2(20) NOT NULL,
INUNDACIONES VARCHAR2(20) NOT NULL
);

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_ACTOS_POR_TERCEROS
	CHECK (ACTOS_POR_TERCEROS IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_CANON_ARRENDAMIENTO
	CHECK (CANON_ARRENDAMIENTO IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_DANIOS_INCENDIO
	CHECK (DANIOS_INCENDIO IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_DANIOS_MASCOTAS
	CHECK (DANIOS_MASCOTAS IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_DANIOS_RAYOS
	CHECK (DANIOS_RAYOS IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_DANIOS_TERREMOTO
	CHECK (DANIOS_TERREMOTO IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_EXPLOSIONES
	CHECK (EXPLOSIONES IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_HURTO
	CHECK (HURTO IN ('YES','NO'))
ENABLE; 

ALTER TABLE SEGURO_ARRENDAMIENTO
	ADD CONSTRAINT CK_INUNDACIONES
	CHECK (INUNDACIONES IN ('YES','NO'))
ENABLE; 

-- CREACIÓN TABLA RESERVA
CREATE TABLE RESERVA(
ID NUMBER, 
ID_CONTRATO NUMBER NOT NULL, 
PERSONAS NUMBER NOT NULL,
FECHA_INICIO VARCHAR2(50) NOT NULL, 
FECHA_FIN VARCHAR2(50) NOT NULL, 
FECHA_LIMITE VARCHAR2(50) NOT NULL, 
FECHA_REALIZACIOM VARCHAR2(50) NOT NULL, 
TIPO VARCHAR2(50) NOT NULL,
ID_CLIENTE NUMBER NOT NULL
);

ALTER TABLE RESERVA
	ADD CONSTRAINT PK_RESERVA
	PRIMARY KEY (ID) 
ENABLE; 

ALTER TABLE RESERVA
	ADD CONSTRAINT FK_CLIENTERESERVA
	FOREIGN KEY (ID_CLIENTE)
	REFERENCES CLIENTE(ID)
ENABLE;

ALTER TABLE RESERVA
	ADD CONSTRAINT FK_CONTRATORESERVA
	FOREIGN KEY (ID_CONTRATO)
	REFERENCES CONTRATO(ID)
ENABLE;

ALTER TABLE RESERVA
	ADD CONSTRAINT CK_PERSONAS
	CHECK(PERSONAS>=0)
ENABLE; 

ALTER TABLE RESERVA 
	ADD CONSTRAINT CK_TIPORESERVA
	CHECK (TIPO IN ('HOTEL','HOSTAL','VIVIENDA_UNIVERSITARIA','APARTAMENTO','VIVIENDA_FAMILIAR','CLIENTE_ESPORADICO'))
ENABLE;
COMMIT;